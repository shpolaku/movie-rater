"use strict";module.exports=exports=handle_gyp_opts;const versioning=require(`./versioning.js`),napi=require(`./napi.js`),share_with_node_gyp=[`module`,`module_name`,`module_path`,`napi_version`,`node_abi_napi`,`napi_build_version`,`node_napi_label`];function handle_gyp_opts(r,i,a){let o=[],s=napi.get_napi_build_version_from_command_args(i),c=versioning.evaluate(r.package_json,r.opts,s);share_with_node_gyp.forEach(e=>{let t=c[e];if(t)o.push(`--`+e+`=`+t);else if(e===`napi_build_version`)o.push(`--`+e+`=0`);else if(e!==`napi_version`&&e!==`node_abi_napi`)return a(Error(`Option `+e+` required but not found by node-pre-gyp`))});let l=[],u=!1;r.opts.argv.original.forEach(e=>{u&&l.push(e),e===`--`&&(u=!0)});let d=r.opts.argv.cooked,f=[];return d.forEach(e=>{if(e.length>2&&e.slice(0,2)===`--`){let t=e.slice(2),n=d[d.indexOf(e)+1];n&&n.indexOf(`--`)===-1?f.push(`--`+t+`=`+n):f.push(e)}}),a(null,{opts:c,gyp:f,pre:o,unparsed:l})}