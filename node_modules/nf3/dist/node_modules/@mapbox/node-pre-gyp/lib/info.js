"use strict";module.exports=exports=info,exports.usage=`Lists all published binaries (requires aws-sdk)`;const log=require(`./util/log.js`),versioning=require(`./util/versioning.js`),s3_setup=require(`./util/s3_setup.js`);function info(r,i,a){let o=r.package_json,s=versioning.evaluate(o,r.opts),c=s3_setup.detect(s),l=s3_setup.get_s3(c),u={Bucket:c.bucket,Prefix:c.prefix};l.listObjects(u,(t,n)=>t&&t.code===`NotFound`?a(Error(`[`+o.name+`] Not found: https://`+s.hosted_path)):t?a(t):(log.verbose(JSON.stringify(n,null,1)),n&&n.Contents.length?n.Contents.forEach(e=>{console.log(e.Key)}):console.error(`[`+o.name+`] Not found: No objects at https://`+s.hosted_path),a()))}