"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.pregyp=void 0,exports.nbind=nbind;const path_1=__importDefault(require(`path`)),graceful_fs_1=__importDefault(require(`graceful-fs`)),versioning=require(`@mapbox/node-pre-gyp/lib/util/versioning.js`),napi=require(`@mapbox/node-pre-gyp/lib/util/napi.js`),pregypFind=(e,t)=>{let n=JSON.parse(graceful_fs_1.default.readFileSync(e).toString());versioning.validate_config(n,t);var r;return napi.get_napi_build_versions(n,t)&&(r=napi.get_best_napi_build_version(n,t)),t||={},t.module_root||=path_1.default.dirname(e),versioning.evaluate(n,t,r).module};exports.pregyp={default:{find:pregypFind},find:pregypFind};function makeModulePathList(e,t){return[[e,t],[e,`build`,t],[e,`build`,`Debug`,t],[e,`build`,`Release`,t],[e,`out`,`Debug`,t],[e,`Debug`,t],[e,`out`,`Release`,t],[e,`Release`,t],[e,`build`,`default`,t],[e,process.env.NODE_BINDINGS_COMPILED_DIR||`compiled`,process.versions.node,process.platform,process.arch,t]]}function findCompiledModule(basePath,specList){for(var resolvedList=[],ext=path_1.default.extname(basePath),_i=0,specList_1=specList;_i<specList_1.length;_i++){var spec=specList_1[_i];if(ext==spec.ext)try{return spec.path=eval(`require.resolve(basePath)`),spec}catch{resolvedList.push(basePath)}}for(var _a=0,specList_2=specList;_a<specList_2.length;_a++)for(var spec=specList_2[_a],_b=0,_c=makeModulePathList(basePath,spec.name);_b<_c.length;_b++){var pathParts=_c[_b],resolvedPath=path_1.default.resolve.apply(path_1.default,pathParts);try{spec.path=eval(`require.resolve(resolvedPath)`)}catch{resolvedList.push(resolvedPath);continue}return spec}return null}function nbind(e=process.cwd()){return findCompiledModule(e,[{ext:`.node`,name:`nbind.node`,type:`node`},{ext:`.js`,name:`nbind.js`,type:`emcc`}])}