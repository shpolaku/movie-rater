"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.sharedLibEmit=sharedLibEmit;const os_1=__importDefault(require(`os`)),path_1=__importDefault(require(`path`)),glob_1=require(`glob`),get_package_base_1=require(`./get-package-base`);let sharedlibGlob=``;switch(os_1.default.platform()){case`darwin`:sharedlibGlob=`/**/*.@(dylib|so?(.*))`;break;case`win32`:sharedlibGlob=`/**/*.dll`;break;default:sharedlibGlob=`/**/*.so?(.*)`}async function sharedLibEmit(e,t){let r=(0,get_package_base_1.getPackageBase)(e);if(!r)return;let i=await(0,glob_1.glob)(r.replaceAll(path_1.default.sep,path_1.default.posix.sep)+sharedlibGlob,{ignore:r.replaceAll(path_1.default.sep,path_1.default.posix.sep)+`/**/node_modules/**/*`,dot:!0});await Promise.all(i.map(n=>t.emitFile(n,`sharedlib`,e)))}