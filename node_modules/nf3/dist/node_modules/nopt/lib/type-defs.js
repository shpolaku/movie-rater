const url=require(`url`),path=require(`path`),Stream=require(`stream`).Stream,os=require(`os`),debug=require(`./debug`);function validateString(e,t,n){e[t]=String(n)}function validatePath(e,n,i){if(i===!0)return!1;if(i===null)return!0;i=String(i);let a=process.platform===`win32`?/^~(\/|\\)/:/^~\//,o=os.homedir();return o&&i.match(a)?e[n]=path.resolve(o,i.slice(2)):e[n]=path.resolve(i),!0}function validateNumber(e,t,n){if(debug(`validate Number %j %j %j`,t,n,isNaN(n)),isNaN(n))return!1;e[t]=+n}function validateDate(e,t,n){let r=Date.parse(n);if(debug(`validate Date %j %j %j`,t,n,r),isNaN(r))return!1;e[t]=new Date(n)}function validateBoolean(e,t,n){n=typeof n==`string`?isNaN(n)?!(n===`null`||n===`false`):!!+n:!!n,e[t]=n}function validateUrl(t,n,r){if(r=url.parse(String(r)),!r.host)return!1;t[n]=r.href}function validateStream(e,t,r){if(!(r instanceof Stream))return!1;e[t]=r}module.exports={String:{type:String,validate:validateString},Boolean:{type:Boolean,validate:validateBoolean},url:{type:url,validate:validateUrl},Number:{type:Number,validate:validateNumber},path:{type:path,validate:validatePath},Stream:{type:Stream,validate:validateStream},Date:{type:Date,validate:validateDate},Array:{type:Array}};