"use strict";Object.defineProperty(exports,`__esModule`,{value:!0}),exports.parseClass=void 0;const posixClasses={"[:alnum:]":[`\\p{L}\\p{Nl}\\p{Nd}`,!0],"[:alpha:]":[`\\p{L}\\p{Nl}`,!0],"[:ascii:]":[`\\x00-\\x7f`,!1],"[:blank:]":[`\\p{Zs}\\t`,!0],"[:cntrl:]":[`\\p{Cc}`,!0],"[:digit:]":[`\\p{Nd}`,!0],"[:graph:]":[`\\p{Z}\\p{C}`,!0,!0],"[:lower:]":[`\\p{Ll}`,!0],"[:print:]":[`\\p{C}`,!0],"[:punct:]":[`\\p{P}`,!0],"[:space:]":[`\\p{Z}\\t\\r\\n\\v\\f`,!0],"[:upper:]":[`\\p{Lu}`,!0],"[:word:]":[`\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}`,!0],"[:xdigit:]":[`A-Fa-f0-9`,!1]},braceEscape=e=>e.replace(/[[\]\\-]/g,`\\$&`),regexpEscape=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,`\\$&`),rangesToString=e=>e.join(``),parseClass=(i,a)=>{let o=a;if(i.charAt(o)!==`[`)throw Error(`not in a brace expression`);let s=[],c=[],l=o+1,u=!1,d=!1,f=!1,p=!1,m=o,h=``;WHILE:for(;l<i.length;){let n=i.charAt(l);if((n===`!`||n===`^`)&&l===o+1){p=!0,l++;continue}if(n===`]`&&u&&!f){m=l+1;break}if(u=!0,n===`\\`&&!f){f=!0,l++;continue}if(n===`[`&&!f){for(let[t,[n,r,a]]of Object.entries(posixClasses))if(i.startsWith(t,l)){if(h)return[`$.`,!1,i.length-o,!0];l+=t.length,a?c.push(n):s.push(n),d||=r;continue WHILE}}if(f=!1,h){n>h?s.push(braceEscape(h)+`-`+braceEscape(n)):n===h&&s.push(braceEscape(n)),h=``,l++;continue}if(i.startsWith(`-]`,l+1)){s.push(braceEscape(n+`-`)),l+=2;continue}if(i.startsWith(`-`,l+1)){h=n,l+=2;continue}s.push(braceEscape(n)),l++}if(m<l)return[``,!1,0,!1];if(!s.length&&!c.length)return[`$.`,!1,i.length-o,!0];if(c.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!p)return[regexpEscape(s[0].length===2?s[0].slice(-1):s[0]),!1,m-o,!1];let g=`[`+(p?`^`:``)+rangesToString(s)+`]`,_=`[`+(p?``:`^`)+rangesToString(c)+`]`;return[s.length&&c.length?`(`+g+`|`+_+`)`:s.length?g:_,d,m-o,!0]};exports.parseClass=parseClass;