"use strict";Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Pattern=void 0;const minimatch_1=require(`minimatch`),isPatternList=e=>e.length>=1,isGlobList=e=>e.length>=1;class Pattern{#patternList;#globList;#index;length;#platform;#rest;#globString;#isDrive;#isUNC;#isAbsolute;#followGlobstar=!0;constructor(e,r,i,a){if(!isPatternList(e))throw TypeError(`empty pattern list`);if(!isGlobList(r))throw TypeError(`empty glob list`);if(r.length!==e.length)throw TypeError(`mismatched pattern list and glob list lengths`);if(this.length=e.length,i<0||i>=this.length)throw TypeError(`index out of range`);if(this.#patternList=e,this.#globList=r,this.#index=i,this.#platform=a,this.#index===0){if(this.isUNC()){let[e,t,n,r,...i]=this.#patternList,[a,o,s,c,...l]=this.#globList;i[0]===``&&(i.shift(),l.shift());let u=[e,t,n,r,``].join(`/`),d=[a,o,s,c,``].join(`/`);this.#patternList=[u,...i],this.#globList=[d,...l],this.length=this.#patternList.length}else if(this.isDrive()||this.isAbsolute()){let[e,...t]=this.#patternList,[n,...r]=this.#globList;t[0]===``&&(t.shift(),r.shift());let i=e+`/`,a=n+`/`;this.#patternList=[i,...t],this.#globList=[a,...r],this.length=this.#patternList.length}}}pattern(){return this.#patternList[this.#index]}isString(){return typeof this.#patternList[this.#index]==`string`}isGlobstar(){return this.#patternList[this.#index]===minimatch_1.GLOBSTAR}isRegExp(){return this.#patternList[this.#index]instanceof RegExp}globString(){return this.#globString=this.#globString||(this.#index===0?this.isAbsolute()?this.#globList[0]+this.#globList.slice(1).join(`/`):this.#globList.join(`/`):this.#globList.slice(this.#index).join(`/`))}hasMore(){return this.length>this.#index+1}rest(){return this.#rest===void 0?this.hasMore()?(this.#rest=new Pattern(this.#patternList,this.#globList,this.#index+1,this.#platform),this.#rest.#isAbsolute=this.#isAbsolute,this.#rest.#isUNC=this.#isUNC,this.#rest.#isDrive=this.#isDrive,this.#rest):this.#rest=null:this.#rest}isUNC(){let e=this.#patternList;return this.#isUNC===void 0?this.#isUNC=this.#platform===`win32`&&this.#index===0&&e[0]===``&&e[1]===``&&typeof e[2]==`string`&&!!e[2]&&typeof e[3]==`string`&&!!e[3]:this.#isUNC}isDrive(){let e=this.#patternList;return this.#isDrive===void 0?this.#isDrive=this.#platform===`win32`&&this.#index===0&&this.length>1&&typeof e[0]==`string`&&/^[a-z]:$/i.test(e[0]):this.#isDrive}isAbsolute(){let e=this.#patternList;return this.#isAbsolute===void 0?this.#isAbsolute=e[0]===``&&e.length>1||this.isDrive()||this.isUNC():this.#isAbsolute}root(){let e=this.#patternList[0];return typeof e==`string`&&this.isAbsolute()&&this.#index===0?e:``}checkFollowGlobstar(){return!(this.#index===0||!this.isGlobstar()||!this.#followGlobstar)}markFollowGlobstar(){return this.#index===0||!this.isGlobstar()||!this.#followGlobstar?!1:(this.#followGlobstar=!1,!0)}}exports.Pattern=Pattern;