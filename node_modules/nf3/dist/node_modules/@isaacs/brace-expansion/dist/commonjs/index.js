"use strict";Object.defineProperty(exports,`__esModule`,{value:!0}),exports.expand=expand;const balanced_match_1=require(`@isaacs/balanced-match`),escSlash=`\0SLASH`+Math.random()+`\0`,escOpen=`\0OPEN`+Math.random()+`\0`,escClose=`\0CLOSE`+Math.random()+`\0`,escComma=`\0COMMA`+Math.random()+`\0`,escPeriod=`\0PERIOD`+Math.random()+`\0`,escSlashPattern=new RegExp(escSlash,`g`),escOpenPattern=new RegExp(escOpen,`g`),escClosePattern=new RegExp(escClose,`g`),escCommaPattern=new RegExp(escComma,`g`),escPeriodPattern=new RegExp(escPeriod,`g`),slashPattern=/\\\\/g,openPattern=/\\{/g,closePattern=/\\}/g,commaPattern=/\\,/g,periodPattern=/\\./g;function numeric(e){return isNaN(e)?e.charCodeAt(0):parseInt(e,10)}function escapeBraces(e){return e.replace(slashPattern,escSlash).replace(openPattern,escOpen).replace(closePattern,escClose).replace(commaPattern,escComma).replace(periodPattern,escPeriod)}function unescapeBraces(e){return e.replace(escSlashPattern,`\\`).replace(escOpenPattern,`{`).replace(escClosePattern,`}`).replace(escCommaPattern,`,`).replace(escPeriodPattern,`.`)}function parseCommaParts(t){if(!t)return[``];let n=[],r=(0,balanced_match_1.balanced)(`{`,`}`,t);if(!r)return t.split(`,`);let{pre:i,body:a,post:o}=r,s=i.split(`,`);s[s.length-1]+=`{`+a+`}`;let c=parseCommaParts(o);return o.length&&(s[s.length-1]+=c.shift(),s.push.apply(s,c)),n.push.apply(n,s),n}function expand(e){return e?(e.slice(0,2)===`{}`&&(e=`\\{\\}`+e.slice(2)),expand_(escapeBraces(e),!0).map(unescapeBraces)):[]}function embrace(e){return`{`+e+`}`}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand_(t,n){let i=[],a=(0,balanced_match_1.balanced)(`{`,`}`,t);if(!a)return[t];let o=a.pre,s=a.post.length?expand_(a.post,!1):[``];if(/\$$/.test(a.pre))for(let e=0;e<s.length;e++){let t=o+`{`+a.body+`}`+s[e];i.push(t)}else{let e=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(a.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(a.body),l=e||c,u=a.body.indexOf(`,`)>=0;if(!l&&!u)return a.post.match(/,(?!,).*\}/)?(t=a.pre+`{`+a.body+escClose+a.post,expand_(t)):[t];let d;if(l)d=a.body.split(/\.\./);else if(d=parseCommaParts(a.body),d.length===1&&d[0]!==void 0&&(d=expand_(d[0],!1).map(embrace),d.length===1))return s.map(e=>a.pre+d[0]+e);let f;if(l&&d[0]!==void 0&&d[1]!==void 0){let e=numeric(d[0]),t=numeric(d[1]),n=Math.max(d[0].length,d[1].length),r=d.length===3&&d[2]!==void 0?Math.abs(numeric(d[2])):1,i=lte;t<e&&(r*=-1,i=gte);let a=d.some(isPadded);f=[];for(let o=e;i(o,t);o+=r){let e;if(c)e=String.fromCharCode(o),e===`\\`&&(e=``);else if(e=String(o),a){let t=n-e.length;if(t>0){let n=Array(t+1).join(`0`);e=o<0?`-`+n+e.slice(1):n+e}}f.push(e)}}else{f=[];for(let e=0;e<d.length;e++)f.push.apply(f,expand_(d[e],!1))}for(let e=0;e<f.length;e++)for(let t=0;t<s.length;t++){let r=o+f[e]+s[t];(!n||l||r)&&i.push(r)}}return i}