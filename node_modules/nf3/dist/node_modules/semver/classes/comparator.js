"use strict";const ANY=Symbol(`SemVer ANY`);class Comparator{static get ANY(){return ANY}constructor(i,a){if(a=parseOptions(a),i instanceof Comparator){if(i.loose===!!a.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(` `),debug(`comparator`,i,a),this.options=a,this.loose=!!a.loose,this.parse(i),this.semver===ANY?this.value=``:this.value=this.operator+this.semver.version,debug(`comp`,this)}parse(n){let r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],o=n.match(r);if(!o)throw TypeError(`Invalid comparator: ${n}`);this.operator=o[1]===void 0?``:o[1],this.operator===`=`&&(this.operator=``),o[2]?this.semver=new SemVer(o[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(n){if(debug(`Comparator.test`,n,this.options.loose),this.semver===ANY||n===ANY)return!0;if(typeof n==`string`)try{n=new SemVer(n,this.options)}catch{return!1}return cmp(n,this.operator,this.semver,this.options)}intersects(e,i){if(!(e instanceof Comparator))throw TypeError(`a Comparator is required`);return this.operator===``?this.value===``?!0:new Range(e.value,i).test(this.value):e.operator===``?e.value===``?!0:new Range(this.value,i).test(e.semver):(i=parseOptions(i),i.includePrerelease&&(this.value===`<0.0.0-0`||e.value===`<0.0.0-0`)||!i.includePrerelease&&(this.value.startsWith(`<0.0.0`)||e.value.startsWith(`<0.0.0`))?!1:!!(this.operator.startsWith(`>`)&&e.operator.startsWith(`>`)||this.operator.startsWith(`<`)&&e.operator.startsWith(`<`)||this.semver.version===e.semver.version&&this.operator.includes(`=`)&&e.operator.includes(`=`)||cmp(this.semver,`<`,e.semver,i)&&this.operator.startsWith(`>`)&&e.operator.startsWith(`<`)||cmp(this.semver,`>`,e.semver,i)&&this.operator.startsWith(`<`)&&e.operator.startsWith(`>`)))}}module.exports=Comparator;const parseOptions=require(`../internal/parse-options`),{safeRe:re,t}=require(`../internal/re`),cmp=require(`../functions/cmp`),debug=require(`../internal/debug`),SemVer=require(`./semver`),Range=require(`./range`);