"use strict";const SemVer=require(`../classes/semver`),parse=require(`./parse`),{safeRe:re,t}=require(`../internal/re`),coerce=(r,i)=>{if(r instanceof SemVer)return r;if(typeof r==`number`&&(r=String(r)),typeof r!=`string`)return null;i||={};let a=null;if(!i.rtl)a=r.match(i.includePrerelease?re[t.COERCEFULL]:re[t.COERCE]);else{let e=i.includePrerelease?re[t.COERCERTLFULL]:re[t.COERCERTL],n;for(;(n=e.exec(r))&&(!a||a.index+a[0].length!==r.length);)(!a||n.index+n[0].length!==a.index+a[0].length)&&(a=n),e.lastIndex=n.index+n[1].length+n[2].length;e.lastIndex=-1}if(a===null)return null;let o=a[2];return parse(`${o}.${a[3]||`0`}.${a[4]||`0`}${i.includePrerelease&&a[5]?`-${a[5]}`:``}${i.includePrerelease&&a[6]?`+${a[6]}`:``}`,i)};module.exports=coerce;