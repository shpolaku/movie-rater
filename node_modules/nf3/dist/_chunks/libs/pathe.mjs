const _DRIVE_LETTER_START_RE=/^[A-Za-z]:\//;function normalizeWindowsPath(t=``){return t&&t.replace(/\\/g,`/`).replace(_DRIVE_LETTER_START_RE,e=>e.toUpperCase())}const _UNC_REGEX=/^[/\\]{2}/,_IS_ABSOLUTE_RE=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,_DRIVE_LETTER_RE=/^[A-Za-z]:$/,_ROOT_FOLDER_RE=/^\/([A-Za-z]:)?$/,normalize=function(e){if(e.length===0)return`.`;e=normalizeWindowsPath(e);let r=e.match(_UNC_REGEX),a=isAbsolute(e),o=e[e.length-1]===`/`;return e=normalizeString(e,!a),e.length===0?a?`/`:o?`./`:`.`:(o&&(e+=`/`),_DRIVE_LETTER_RE.test(e)&&(e+=`/`),r?a?`//${e}`:`//./${e}`:a&&!isAbsolute(e)?`/${e}`:e)},join=function(...e){let t=``;for(let n of e)if(n)if(t.length>0){let e=t[t.length-1]===`/`,r=n[0]===`/`;e&&r?t+=n.slice(1):t+=e||r?n:`/${n}`}else t+=n;return normalize(t)};function cwd(){return typeof process<`u`&&typeof process.cwd==`function`?process.cwd().replace(/\\/g,`/`):`/`}const resolve=function(...e){e=e.map(e=>normalizeWindowsPath(e));let n=``,r=!1;for(let t=e.length-1;t>=-1&&!r;t--){let i=t>=0?e[t]:cwd();!i||i.length===0||(n=`${i}/${n}`,r=isAbsolute(i))}return n=normalizeString(n,!r),r&&!isAbsolute(n)?`/${n}`:n.length>0?n:`.`};function normalizeString(e,t){let n=``,r=0,i=-1,a=0,o=null;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o===`/`)break;else o=`/`;if(o===`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n[n.length-1]!==`.`||n[n.length-2]!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length>0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/${e.slice(i+1,s)}`:n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}const isAbsolute=function(e){return _IS_ABSOLUTE_RE.test(e)},relative=function(e,t){let n=resolve(e).replace(_ROOT_FOLDER_RE,`$1`).split(`/`),r=resolve(t).replace(_ROOT_FOLDER_RE,`$1`).split(`/`);if(r[0][1]===`:`&&n[0][1]===`:`&&n[0]!==r[0])return r.join(`/`);let i=[...n];for(let e of i){if(r[0]!==e)break;n.shift(),r.shift()}return[...n.map(()=>`..`),...r].join(`/`)},dirname=function(e){let n=normalizeWindowsPath(e).replace(/\/$/,``).split(`/`).slice(0,-1);return n.length===1&&_DRIVE_LETTER_RE.test(n[0])&&(n[0]+=`/`),n.join(`/`)||(isAbsolute(e)?`/`:`.`)};export{relative as a,normalize as i,isAbsolute as n,resolve as o,join as r,dirname as t};